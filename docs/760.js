"use strict";(self.webpackChunktestApp=self.webpackChunktestApp||[]).push([[760],{6760:(F,u,n)=>{n.r(u),n.d(u,{DangerNotificationsModule:()=>Y});var s=n(6610),f=n(6075),m=n(1987),l=n(7222),p=n(4053),c=n(5706),E=n(3836),t=n(2978),a=n(5006),b=n(9562),D=n(6864),g=n(2073),N=n(4587),y=n(2221);function C(i,d){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Name is required"),t.k0s())}function _(i,d){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Valid email is required"),t.k0s())}function I(i,d){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"company name is required"),t.k0s())}function j(i,d){1&i&&t.nrm(0,"app-loader")}let S=(()=>{class i{constructor(e,o,r,h,X,B){this.dialogRef=e,this.parentData=o,this.dialog=r,this.notifyUsersService=h,this._FormBuilder=X,this.msgHandelService=B,this.loading=!1}ngOnInit(){console.log("parentData",this.parentData),this.rForm=this._FormBuilder.group({name:[null,l.k0.compose([l.k0.required])],email:[null,l.k0.compose([l.k0.required,l.k0.pattern(c.$1)])],company:[null,l.k0.compose([l.k0.required])]})}closeModel(){this.dialog.open(E.w,{width:"30vw",data:{title:"Please Confirm",msg:"Do you want to discard changes?"},panelClass:"confirmation-dialog"}).afterClosed().subscribe(o=>{null!=o&&o.status&&this.dialogRef.close({status:!1})})}submitForm(){this.loading=!0,this.notifyUsersService.saveNotifyUsers({name:this.rForm.controls.name.value,email:this.rForm.controls.email.value,company:this.rForm.controls.company.value}).subscribe(e=>{e.status&&(this.msgHandelService.showSuccessMsg("","Successfully subscribed email notification service"),this.dialogRef.close({status:!1})),this.loading=!1},e=>{this.loading=!1,this.msgHandelService.handleError(e)})}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(p.CP),t.rXU(p.Vh),t.rXU(p.bZ),t.rXU(a.Z),t.rXU(l.ok),t.rXU(b.D))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-danger-notification-subscribe-model"]],decls:29,vars:6,consts:[[1,"display-flex","mb-3","mr-4","mt-3"],["aria-hidden","true","data-toggle","tooltip","data-placement","top","title","Close",1,"fa","fa-times","ml-auto","font-1-4","cursor-pointer",3,"click"],[1,"font-1-6","header-title","text-center","mb-4"],[1,"font-1","mb-4","pl-4","pr-4"],[1,"form-wrapper"],["role","form",1,"m-t-30",3,"formGroup","ngSubmit"],[1,""],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","placeholder","Enter Email","type","text","formControlName","name"],[4,"ngIf"],["matInput","","placeholder","Enter Email","type","text","formControlName","email"],["matInput","","placeholder","Enter company name","type","text","formControlName","company"],[1,"d-flex","w-100"],["type","submit","mat-flat-button","","color","primary",1,"w-100",3,"disabled"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"i",1),t.bIt("click",function(){return r.closeModel()}),t.k0s()(),t.j41(2,"h1",2),t.EFF(3," Subscribe to Notifications\n"),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"form",5),t.bIt("ngSubmit",function(){return r.submitForm()}),t.j41(7,"div",6)(8,"mat-label",7),t.EFF(9,"Name"),t.k0s(),t.j41(10,"mat-form-field",8),t.nrm(11,"input",9),t.DNE(12,C,2,0,"mat-error",10),t.k0s()(),t.j41(13,"div",6)(14,"mat-label",7),t.EFF(15,"Email"),t.k0s(),t.j41(16,"mat-form-field",8),t.nrm(17,"input",11),t.DNE(18,_,2,0,"mat-error",10),t.k0s()(),t.j41(19,"div",6)(20,"mat-label",7),t.EFF(21,"company Name"),t.k0s(),t.j41(22,"mat-form-field",8),t.nrm(23,"input",12),t.DNE(24,I,2,0,"mat-error",10),t.k0s()(),t.j41(25,"div",13)(26,"button",14),t.EFF(27," Subscribe "),t.k0s()()()()(),t.DNE(28,j,1,0,"app-loader",10)),2&o&&(t.R7$(6),t.Y8G("formGroup",r.rForm),t.R7$(6),t.Y8G("ngIf",!r.rForm.controls.name.valid&&r.rForm.controls.name.touched),t.R7$(6),t.Y8G("ngIf",!r.rForm.controls.email.valid&&r.rForm.controls.email.touched),t.R7$(6),t.Y8G("ngIf",!r.rForm.controls.company.valid&&r.rForm.controls.company.touched),t.R7$(2),t.Y8G("disabled",!r.rForm.valid),t.R7$(2),t.Y8G("ngIf",r.loading))},dependencies:[s.bT,D.V,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,g.rl,g.nJ,g.TL,N.fg,y.$z]})}}return i})();var R=n(6169),v=n(643),T=n(3651);function M(i,d){if(1&i&&(t.j41(0,"h6",17),t.EFF(1),t.nI1(2,"truncateText"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",t.i5U(2,1,null==e?null:e.name,7)," ")}}function k(i,d){1&i&&(t.j41(0,"h6",17),t.EFF(1," - "),t.k0s())}function $(i,d){if(1&i&&(t.j41(0,"div",8),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",t.i5U(2,1,null==e?null:e.distance,"1.2-2")," ")}}function G(i,d){1&i&&(t.j41(0,"div",8),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&i&&(t.R7$(1),t.SpI(" ",t.i5U(2,1,0,"1.2-2")," "))}function U(i,d){if(1&i&&(t.j41(0,"tr")(1,"td")(2,"div",16)(3,"div",8)(4,"h6",17),t.EFF(5),t.nI1(6,"date"),t.k0s()()()(),t.j41(7,"td")(8,"div",16)(9,"div",8)(10,"h6",17),t.EFF(11),t.k0s()()()(),t.j41(12,"td")(13,"div",16)(14,"div",8),t.DNE(15,M,3,4,"h6",18),t.DNE(16,k,2,0,"h6",18),t.k0s()()(),t.j41(17,"td")(18,"div",16)(19,"div",8)(20,"h6",17),t.EFF(21),t.k0s()()()(),t.j41(22,"td")(23,"div",16)(24,"div",8)(25,"h6",17),t.DNE(26,$,3,4,"div",19),t.DNE(27,G,3,4,"div",19),t.k0s()()()(),t.j41(28,"td")(29,"div",16)(30,"div",8)(31,"span",20),t.EFF(32," Sended "),t.k0s()()()()()),2&i){const e=d.$implicit;t.R7$(5),t.SpI(" ",t.i5U(6,7,null==e?null:e.created_at,"dd/MM/yy HH:mm:ss")," "),t.R7$(6),t.SpI(" ",null!=e&&e.name?null==e?null:e.name:"-"," "),t.R7$(4),t.Y8G("ngIf",null==e?null:e.name),t.R7$(1),t.Y8G("ngIf",!(null!=e&&e.name)),t.R7$(5),t.SpI(" ",null!=e&&e.company?null==e?null:e.company:"-"," "),t.R7$(5),t.Y8G("ngIf",null==e?null:e.distance),t.R7$(1),t.Y8G("ngIf",!(null!=e&&e.distance))}}function w(i,d){if(1&i&&(t.j41(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th",14),t.EFF(5,"Time"),t.k0s(),t.j41(6,"th",14),t.EFF(7,"name"),t.k0s(),t.j41(8,"th",14),t.EFF(9,"Email"),t.k0s(),t.j41(10,"th",14),t.EFF(11,"company"),t.k0s(),t.j41(12,"th",14),t.EFF(13,"distance (m)"),t.k0s(),t.j41(14,"th",14),t.EFF(15,"status"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,U,33,10,"tr",15),t.k0s()()()),2&i){const e=t.XpG(2);t.R7$(17),t.Y8G("ngForOf",e.dataList)}}function x(i,d){1&i&&(t.j41(0,"div",21),t.nrm(1,"i",22),t.j41(2,"div",23),t.EFF(3,"No Data"),t.k0s()())}function V(i,d){if(1&i&&(t.j41(0,"div",5)(1,"mat-card",6)(2,"mat-card-content",7)(3,"div",8)(4,"div",0)(5,"div",9)(6,"mat-card-title"),t.EFF(7,"Notified Users"),t.k0s()()()(),t.DNE(8,w,18,1,"div",10),t.DNE(9,x,4,0,"div",11),t.k0s()()()),2&i){const e=t.XpG();t.R7$(8),t.Y8G("ngIf",null==e.dataList?null:e.dataList.length),t.R7$(1),t.Y8G("ngIf",!(null!=e.dataList&&e.dataList.length))}}function P(i,d){1&i&&t.nrm(0,"app-loader")}const A=[{path:"",children:[{path:"",component:(()=>{class i{constructor(e,o,r){this.reportsService=e,this.msgHandelService=o,this.dialog=r,this.isFirstTime=!0,this.perPage=m.k.PER_PAGE,this.pageNo=m.k.PAGE_NO,this.loading=!1,this.dataList=[],this.totalItems=0}ngOnInit(){this.getAll()}copyToClipBoard(e,o){}onPageChanged(e){}getAll(){this.loading=!0,this.reportsService.getAllSendedNotifications("limit=10&page=1&column=0&order=desc").subscribe(e=>{this.loading=!1,this.dataList=e?.data?.records,this.totalItems=e?.data?.recordsTotal},e=>{this.loading=!1,this.msgHandelService.handleError(e)})}search(){}reset(){}openSubscriptionModel(){this.dialog.open(S,{width:"515px",maxHeight:"85vh",autoFocus:!1,disableClose:!0,data:{}}).afterClosed().subscribe(o=>{})}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(R.P),t.rXU(b.D),t.rXU(p.bZ))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-danger-notification-view"]],decls:6,vars:2,consts:[[1,"row"],[1,"col-lg-12"],[1,"row","col-12","d-flex","m-0"],["class","col-lg-12 mt-30",4,"ngIf"],[4,"ngIf"],[1,"col-lg-12","mt-30"],[1,"cardWithShadow"],[1,"p-24"],[1,""],[1,"col-7"],["class","table-responsive mt-4",4,"ngIf"],["class","no-data-comp",4,"ngIf"],[1,"table-responsive","mt-4"],[1,"w-100","table-borderless","mt-3"],[1,"mat-subtitle-1"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"mat-subtitle-1","f-s-14","f-w-700"],["class","mat-subtitle-1 f-s-14 f-w-700",4,"ngIf"],["class","",4,"ngIf"],[1,"bg-light-success","f-s-14","f-w-600","pb-1","pl-3","pr-3","pt-1","rounded","text-success"],[1,"no-data-comp"],["aria-hidden","true",1,"fa","fa-exclamation-triangle","mb-1","font-2-8","text-grey"],[1,"font-weight-bold","text-grey"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",0)(3,"div",2),t.DNE(4,V,10,2,"div",3),t.k0s()()(),t.DNE(5,P,1,0,"app-loader",4),t.k0s()),2&o&&(t.R7$(4),t.Y8G("ngIf",!0),t.R7$(1),t.Y8G("ngIf",r.loading))},dependencies:[s.Sq,s.bT,D.V,v.RN,v.m2,v.dh,s.QX,s.vh,T._]})}}return i})()}]}];let O=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[f.iI.forChild(A),f.iI]})}}return i})();var L=n(1626);let Y=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[s.MD,L.G,O]})}}return i})()},6169:(F,u,n)=>{n.d(u,{P:()=>p});var s=n(3527),f=n(4526),m=n(2978),l=n(3664);let p=(()=>{class c{constructor(t){this._MainService=t}getAllAnalysis(t){return this._MainService.get(`data?${t}`).pipe((0,s.T)(a=>a),(0,f.W)(a=>{throw a}))}getAllReportData(t){return this._MainService.get(`data/get-report-data?${t}`).pipe((0,s.T)(a=>a),(0,f.W)(a=>{throw a}))}getAllSendedNotifications(t){return this._MainService.get(`sended-notifications?${t}`).pipe((0,s.T)(a=>a),(0,f.W)(a=>{throw a}))}getAllNotifiedUsers(t){return this._MainService.get(`notify-users?${t}`).pipe((0,s.T)(a=>a),(0,f.W)(a=>{throw a}))}static{this.\u0275fac=function(a){return new(a||c)(m.KVO(l.t))}}static{this.\u0275prov=m.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()},6864:(F,u,n)=>{n.d(u,{V:()=>f});var s=n(2978);let f=(()=>{class m{static{this.\u0275fac=function(c){return new(c||m)}}static{this.\u0275cmp=s.VBU({type:m,selectors:[["app-loader"]],decls:3,vars:0,consts:[[1,"overlay"],[1,"overlay__inner"],["src","assets/images/loader.gif","alt","",1,"loader-img"]],template:function(c,E){1&c&&(s.j41(0,"div",0)(1,"div",1),s.nrm(2,"img",2),s.k0s()())},styles:[".loader-img[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;transform:translate(-50%,-50%);text-align:center;width:8rem}"]})}}return m})()}}]);